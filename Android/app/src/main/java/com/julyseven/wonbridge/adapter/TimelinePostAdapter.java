package com.julyseven.wonbridge.adapter;import android.content.Context;import android.content.Intent;import android.graphics.drawable.ColorDrawable;import android.view.LayoutInflater;import android.view.View;import android.view.ViewGroup;import android.widget.BaseAdapter;import android.widget.ImageView;import android.widget.TextView;import com.bumptech.glide.Glide;import com.julyseven.wonbridge.R;import com.julyseven.wonbridge.commons.Commons;import com.julyseven.wonbridge.commons.Constants;import com.julyseven.wonbridge.timeline.TimelineDetailActivity;import com.julyseven.wonbridge.model.TimelineEntity;import java.util.ArrayList;/** * Created by GoldRain on 8/22/2016. */public class TimelinePostAdapter extends BaseAdapter{    private Context _context;    private ArrayList<TimelineEntity> _timelinePosts = new ArrayList<>();    public TimelinePostAdapter(Context context){        super();        this._context = context;    }    @Override    public int getCount() {        return _timelinePosts.size();    }    public Object getItem(int position){return _timelinePosts.get(position);}    public long getItemId(int position){return position;}    public View getView (int position, View convertView, ViewGroup parent){        TimelineHolder timelineHolder;        if(convertView == null){            timelineHolder = new TimelineHolder();            LayoutInflater inflater = (LayoutInflater)_context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);            convertView = inflater.inflate(R.layout.item_timeline_post, null);            timelineHolder.imvPhoto = (ImageView)convertView.findViewById(R.id.imv_userprofile);            timelineHolder.txvTimeline = (TextView)convertView.findViewById(R.id.txv_timeline);            timelineHolder.txvTime = (TextView)convertView.findViewById(R.id.txv_time);            timelineHolder.txvDistance = (TextView)convertView.findViewById(R.id.txv_distance);            timelineHolder.txvChatCount = (TextView)convertView.findViewById(R.id.txv_msgCount);            timelineHolder.txvLikeCount = (TextView)convertView.findViewById(R.id.txv_likeCount);            convertView.setTag(timelineHolder);        }else {            timelineHolder = (TimelineHolder)convertView.getTag();        }        final TimelineEntity timeline = _timelinePosts.get(position);        if (timeline.get_fileUrls().size() > 0)            Glide.with(_context).load(timeline.get_fileUrls().get(0)).placeholder(new ColorDrawable(0xff5f99fb)).into(timelineHolder.imvPhoto);        else            timelineHolder.imvPhoto.setImageBitmap(null);        timelineHolder.txvTimeline.setText(timeline.get_content());        timelineHolder.txvLikeCount.setText(String.valueOf(timeline.get_likeCount()));        timelineHolder.txvChatCount.setText(String.valueOf(timeline.get_respondCount()));        timelineHolder.txvTime.setText(Commons.getDisplayLocalTimeString(timeline.get_writeTime()));        timelineHolder.txvDistance.setText(String.valueOf(timeline.getDistance(_context)) + "km");        convertView.setOnClickListener(new View.OnClickListener() {            @Override            public void onClick(View v) {                Intent intent = new Intent(_context, TimelineDetailActivity.class);                intent.putExtra(Constants.KEY_TIMELINE, timeline);                intent.addFlags(Intent.FLAG_ACTIVITY_CLEAR_TOP);                _context.startActivity(intent);            }        });        return convertView;    }    public void setDatas(ArrayList<TimelineEntity> data) {        _timelinePosts = data;        notifyDataSetChanged();    }    public class TimelineHolder {        public TextView txvTimeline, txvTime, txvDistance,            txvLikeCount, txvChatCount;        public ImageView imvPhoto;    }}